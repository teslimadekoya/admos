{% extends 'dashboard/base.html' %}
{% block title %}Add Item - Admos Place{% endblock %}
{% block content %}
<div class="dashboard-page">
    <h1 class="page-title">Add New Item</h1>

    <div class="card">
        <form method="post" enctype="multipart/form-data" id="addItemForm">
            {% csrf_token %}
            <div class="form-group">
                <label for="name">Item Name</label>
                <input type="text" id="name" name="name" required placeholder="e.g., Jollof Rice with Chicken">
            </div>
            
            <div class="form-group">
                <label for="price">Price (â‚¦)</label>
                <input type="number" id="price" name="price" step="0.01" required placeholder="3500.00">
            </div>
            
            <div class="form-group">
                <label for="portions">Available Quantity</label>
                <input type="number" id="portions" name="portions" min="0" value="0" placeholder="0">
                <small class="form-help">Number of items available for ordering</small>
            </div>
            
            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category" required>
                    <option value="">Select a category</option>
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="image">Upload Image (optional)</label>
                <input type="file" id="image" name="image" accept="image/*">
            </div>
            
            <div class="form-group">
                <label for="image_url">Or Image URL (optional)</label>
                <input type="url" id="image_url" name="image_url" placeholder="https://example.com/image.jpg">
            </div>
            
            <div class="form-group">
                <label class="toggle-label">
                    <input type="checkbox" name="out_of_stock" id="out_of_stock_toggle"> 
                    <span class="toggle-text">Mark as Out of Stock</span>
                    <small class="form-help">When enabled, quantity will be set to 0</small>
                </label>
            </div>
            
            <div class="action-bar">
                <button type="submit" class="btn btn-primary">Add Item</button>
                <a href="{% url 'dashboard:items' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const outOfStockToggle = document.getElementById('out_of_stock_toggle');
    const portionsInput = document.getElementById('portions');
    
    function handleToggle() {
        if (outOfStockToggle.checked) {
            portionsInput.disabled = true;
            portionsInput.style.opacity = '0.5';
        } else {
            portionsInput.disabled = false;
            portionsInput.style.opacity = '1';
        }
    }
    
    outOfStockToggle.addEventListener('change', handleToggle);
    handleToggle(); // Initialize on page load
});
</script>
{% endblock %}
